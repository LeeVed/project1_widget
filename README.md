
# виджет банковских операций по карте/счету

## Данный виджет предназначен для банковских операций клиента: 
1. Маскировка номера карты клиента;
2. Маскировка номера счета клиента; 
3. Умеет принимать на вход строку с датой в одном и 
возвращает строку с датой в формате "ДД.ММ.ГГГГ"

# Установка

Клонируйте репозиторий:

``` git clone https://github.com/antondrevin/bank_project.git ```

**Установите зависимости, используя менеджер пакетов `poetry`:**
    
``` poetry install```

## Использование

Виджет предоставляет следующие основные функции:

 1. `get_mask_card_number(card_number)`   
Функция возвращает скрытый номер карты в формате:  
`1234 56** **** 7890`  
 2. `get_mask_account(account_number)`  
Функция возвращает скрытый номер счета в формате:  
`**1234`  
 3. `mask_account_card(name_card)`  
Функция определяет формат данных счет/карта, далее с помощью соответствующих   
функций `1` и `2` скрывает номер. Возвращает в формате:  
`ИМЯ КАРТЫ 1234 56** **** 7890`  
или  
`счет ** 7890`  
 4. `get_date(time_card)`  
Функция возвращает строку с датой в формате:  
`ДД.ММ.ГГГГ`  
 5. `filter_by_state(list_state, key_state = "EXECUTED")`  
Функция фильтрует словари по заданному значению для ключа `state`  
 6. `sort_by_date(list_state, sorting = True)`  
Функция возвращает по умолчанию отсортированный по убыванию список по дате
 ории

## Примеры использования функций

Python

    state_opration = [
    {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
    {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}
    ]

    print(get_mask_card_number(1234567890123456))
    print(get_mask_account(73654108430135874305))
    print(mask_account_card("Счет 64686473678894779589"))
    print(mask_account_card("Visa Gold 5999414228426353"))
    print(get_data("2024-03-11T02:26:18.671407"))
    print(filter_by_state(state_opration))
    print(filter_by_state(state_opration, key_state = "CANCELED"))
    print(sort_by_date(state_opration))
    print(sort_by_date(state_opration, sorting = False))
    gen_usd = filter_by_currency(transactions, "USD")
    gen_rub = filter_by_currency(transactions, "RUB")
    gen_descript = transaction_descriptions(transactions)

    for _ in range(2):
        print(next(gen_usd))

    for _ in range(2):
        print(next(gen_rub))

    for _ in range(4):
        print(next(gen_descript))

    for card_number in card_number_generator(77777, 77779):
        print(card_number)

вывод

    1234 56** **** 3456
    **4305
    счет **9589
    Visa Gold  5999 41** **** 6353
    11.03.2024
    [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]
    [{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]
    [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]
    [{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}]
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572', 'operationAmount': {'amount': '9824.07', 'currency': {'name': 'USD', 'code': 'USD'}}, 'description': 'Перевод организации', 'from': 'Счет 75106830613657916952', 'to': 'Счет 11776614605963066702'}
    {'id': 142264268, 'state': 'EXECUTED', 'date': '2019-04-04T23:20:05.206878', 'operationAmount': {'amount': '79114.93', 'currency': {'name': 'USD', 'code': 'USD'}}, 'description': 'Перевод со счета на счет', 'from': 'Счет 19708645243227258542', 'to': 'Счет 75651667383060284188'}
    {'id': 873106923, 'state': 'EXECUTED', 'date': '2019-03-23T01:09:46.296404', 'operationAmount': {'amount': '43318.34', 'currency': {'name': 'руб.', 'code': 'RUB'}}, 'description': 'Перевод со счета на счет', 'from': 'Счет 44812258784861134719', 'to': 'Счет 74489636417521191160'}
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689', 'operationAmount': {'amount': '67314.70', 'currency': {'name': 'руб.', 'code': 'RUB'}}, 'description': 'Перевод организации', 'from': 'Visa Platinum 1246377376343588', 'to': 'Счет 14211924144426031657'}
    Перевод организации
    Перевод со счета на счет
    Перевод со счета на счет
    Перевод с карты на карту
    0000 0000 0007 7777
    0000 0000 0007 7778
    0000 0000 0007 7779

## Тесты

Структура тестов:

```
tests/
├── test_masks.py # Тесты масок (9 параметризованных тестов)
├── test_processing.py # Тесты обработки (5 фикстур)
├── test_widget.py # Тесты виджетов (6 параметризованных тестов)


```
Покрытие тестами 100%


### Документация

Более подробную документацию по каждой функции можно найти в `docstrings` внутри исходного кода.




# Проект "Виджет банковских операций клиента"

## Описание: 

Проект виджета банковских операций клиента показывает в личном кабинете клиента
несколько последних успешных операций клиента.

## Установка:

1. Создайте новый проект: в главном меню Pycharm выберите New Project.
   
2. Настройте Poetry через Pycharm: в поле Interpreter type выберите Custom Environment,
   в меню Type выберите укажите путь к исполняемому файлу Poetry,
   в Base Python укажите путь к Python,
   укажите путь к исполняемому файлу Poetry,
   в файловом дереве выберите соответствующие папки для формирования пути
   и дойдите до файла poetry.exe
  
3. Установите библиотеки в группу зависимостей lint: poetry install 

4. Создайте в корне проекта файл flake8, укажите нужные параметры:
  [flake8]
  max-line-length = 119
  exclude = .git, __pycache__

5. После установки Poetry у вас появится файл pyproject.toml,
  добавьте в него конфигурацию mypy:
  [tool.mypy]
  disallow_untyped_defs = true
  warn_return_any = true
  exclude = 'venv'
  конфигурацию black:
  [tool.black]
  line-length = 119
  exclude = ".git"
  конфигурацию isort:
  [tool.isort]
  line_length = 119
  force_single_line = true
  combine_as_imports = true
  combine_straight_imports = true

6. В корне проекта создайте пакеты src и tests, файл main.py.  
   В пакете src создайте файл __init__.py и позже файл с функциями:
   masks.py

7. В модуле masks.py создайте 2 функции get_mask_card_number и get_mask_account.

8. Проверьте код через линтеры и форматеры.

9. Создайте локальный Git репозиторий в папке проекта: git init

10. Создайте файл .gitignore в корне проекта и добавьте в него стандартные шаблоны для Python. 

11. Сделайте коммиты в процессе разработки кода, фиксируя основные этапы создания вашего проекта.

12. В пакете src создайте новый модуль с именем widget, в него заложите функцию mask_account_card и
    get_date

13. Создайте новые ветки в вашем репозитории для работы по GitFlow: develop, main, feature.

14. Создайте новый репозиторий на GitHub, 
    который будет использоваться для хранения и совместной работы над вашим проектом.

15. В директории src создайте модуль processing c функциями filter_by_state и sort_by_date.

16. Создайте README-файл для вашего проекта, в котором описаны цель проекта, инструкции по установке 
    и использованию разработанных функций, примеры работы с ними.

17. Залейте содержимое вашего локального репозитория в созданный репозиторий на GitHub, 
    используя команды git add, git commit и git push.


## Использование:

В виджете используются следующие функции:

1.Функция get_mask_card_number принимает на вход номер карты и возвращает ее маску.

2.Функция get_mask_account принимает на вход номер счета и возвращает его маску.

3.Функция mask_account_card принимает на вход строку, содержащую тип и номер карты 
или счета и возвращает строку с замаскированным номером.

4.Функция get_date принимает строку и возвращает строку с датой в формате 
"ДД.ММ.ГГГГ".

5.Функция  принимает список словарей и опционально значение для ключа state
(по умолчанию 'EXECUTED') и возвращает новый список словарей, содержащий только
те словари, у которых ключ state соответствует указанному значению.

6.Функция принимает список словарей и необязательный параметр,
задающий порядок сортировки (по умолчанию — убывание) и возвращает новый список,
отсортированный по дате (date).

